<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Graduation: T-14 weeks - Tyler Wood</title>




<meta name="description" content="Winter break is over and my final semester at Champlain has begun!">




<meta property="og:locale" content="en">
<meta property="og:site_name" content="Tyler Wood">
<meta property="og:title" content="Graduation: T-14 weeks">


  <link rel="canonical" href="http://localhost:4000/2017/graduation-t-14-weeks/">
  <meta property="og:url" content="http://localhost:4000/2017/graduation-t-14-weeks/">



  <meta property="og:description" content="Winter break is over and my final semester at Champlain has begun!">



  <meta name="twitter:site" content="@tyskwo">
  <meta name="twitter:title" content="Graduation: T-14 weeks">
  <meta name="twitter:description" content="Winter break is over and my final semester at Champlain has begun!">
  <meta name="twitter:url" content="http://localhost:4000/2017/graduation-t-14-weeks/">

  
    <meta name="twitter:card" content="summary">
    
  

  







  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-01-26T00:00:00-05:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Tyler Wood",
      "url" : "http://localhost:4000",
      "sameAs" : ["https://twitter.com/tyskwo","https://github.com/tyskwo","https://www.linkedin.com/in/tyskwo"]
    }
  </script>






<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Tyler Wood Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="144x144" href="/assets/images/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/assets/images/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/assets/images/favicons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/assets/images/favicons/manifest.json">
<link rel="mask-icon" href="/assets/images/favicons/safari-pinned-tab.svg" color="#707070">
<link rel="shortcut icon" href="/assets/images/favicons/favicon.ico">
<meta name="msapplication-config" content="/assets/images/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300i,400,400i,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Gentium+Book+Basic:400,400i" rel="stylesheet">

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://localhost:4000/"><p class="masthead__menu-item masthead__menu-item--lgl">TYLER</p>WOOD</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/blog">Blog</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/resume">Resume</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/work">All Work</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    



<div id="main" role="main">
  
  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="http://localhost:4000/assets/images/bio-photo3.png" class="author__avatar" alt="Tyler Wood" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <!--<h3 class="author__name" itemprop="name">Tyler Wood</h3>-->
    
      <p class="author__bio" itemprop="description">
        A game programmer soon to be graduating from Champlain College.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Connect</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> <span itemprop="name">Burlington VT</span>
        </li>
      

      

      
        <li>
          <a href="mailto:me@tyskwo.com">
            <meta itemprop="email" content="me@tyskwo.com" />
            <i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      

      
        <li>
          <a href="https://twitter.com/tyskwo" itemprop="sameAs">
            <i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/tyskwo" itemprop="sameAs">
            <i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/tyskwo" itemprop="sameAs">
            <i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fa fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Graduation: T-14 weeks
</h1>
          <!-- -->
          <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 2017.01.26</p>
          
           <!---->
        </header>
      

      <section class="page__content" itemprop="text">
        <p>I don’t like that. What’s worse is that number will only go down. I guess that just means I need to make the most of it! This past month was winter break (hence the lack of updates), and I mostly spent it unwinding from the crazy whirlwind of last semester. I did get in contact with a few gaming companies to feel out prospective employments, and I’m excited to see where those lead. I also spent more time refactoring the <em>Office Mayhem</em> code base, as well as catch <a href="https://andrewmillsapblog.wordpress.com/">Andy</a> and <a href="https://tonyl.info">Tony</a> up to speed. I also began rewriting my website to move away from Wordpress. That isn’t even close to completion, but you can get <a href="http://tyskwo.github.io/">a sneak peek here.</a> I’m using Jekyll, which is a static website generator. Interesting, and definitely more my style as opposed to Wordpress, but I’ve never tried my hand at web development. It’s exciting and different.</p>

<p>For <em>Office Mayhem,</em> these first two weeks of classes were to get the ball rolling again. The artists have been sketching concepts and planning out animations, and the design team has been hard at work finalizing the outer game loops, brainstorming items within the office, and creating different task architectures. Andy implemented a feature called ‘crunch time,’ where everything moves faster, tasks are worth more, and there’s even more mayhem at the end of every round. Tony refactored and cleaned up my <code class="highlighter-rouge">ProgressBar</code> code, and he’s starting to implement a rock-solid event system to be used for accolades, sound effect decoupling, and possible environmental hazards. I took this time to finish up some last-minute refactoring, commenting, and general housekeeping, as well as rewriting the <code>MenuManager</code> class, complete with custom GUI.</p>

<figure class="align-center">
 <img src="http://localhost:4000/assets/images/blog/2017/01/menumanager.gif" />
  <figcaption>The custom GUI in action. Automatically finds scene files, and has options for what button needs to be pressed, whether or not all players need to press to trigger it, and whether players can undo their action.</figcaption>
</figure>

<p>To create this functionality, there were three problems to overcome. First, be able to find scene files within the project, create a custom GUI for selecting them, and creating an expandable GUI for the <code class="highlighter-rouge">MenuManager</code> itself. The reason for tackling this problem was that before, scenes would have to be manually spelled (possibility of misspellings), the lists were clunky and not visible by default, and the undo/all options were limited to the current scene, thus all transitions has the same values for those parameters – they weren’t on a per-transition basis.</p>

<p>To tackle the first problem, I needed to be able to search through the project files and find any scene files:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="c1">//in class: SceneAssetPathField
</span><span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">LoadableName</span><span class="p">(</span><span class="kt">string</span> <span class="n">path</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">string</span> <span class="n">start</span> <span class="p">=</span> <span class="s">"Assets/Scenes/"</span><span class="p">;</span>
    <span class="kt">string</span> <span class="n">end</span> <span class="p">=</span> <span class="s">".unity"</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="nf">EndsWith</span><span class="p">(</span><span class="n">end</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">path</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">path</span><span class="p">.</span><span class="nf">LastIndexOf</span><span class="p">(</span><span class="n">end</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="nf">StartsWith</span><span class="p">(</span><span class="n">start</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">path</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="n">start</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">path</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>All I needed was a function that can be called on path names to determine whether the scene was in the scene folder (Assets/Scenes), or ended in .unity (which designates a scene file). If it is, I return the name of the scene. Not very difficult.</p>

<p>Next, I needed to create a custom GUI for selecting scenes, and I settled on a <code class="highlighter-rouge">PropertyDrawer</code>:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="c1">//this Unity header designates that this is a property drawer of the above method.
</span><span class="na">[CustomPropertyDrawer(typeof(SceneAssetPathField))]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">SceneAssetPathFieldPropertyDrawer</span><span class="p">:</span> <span class="n">PropertyDrawer</span>
<span class="p">{</span>
    <span class="c1">//when we are updated
</span>    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnGUI</span><span class="p">(</span><span class="n">Rect</span> <span class="n">position</span><span class="p">,</span> <span class="n">SerializedProperty</span> <span class="n">property</span><span class="p">,</span> <span class="n">GUIContent</span> <span class="n">label</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//get our old path
</span>        <span class="kt">var</span> <span class="n">oldPath</span> <span class="p">=</span> <span class="n">AssetDatabase</span><span class="p">.</span><span class="n">LoadAssetAtPath</span><span class="p">&lt;</span><span class="n">SceneAsset</span><span class="p">&gt;(</span><span class="n">property</span><span class="p">.</span><span class="n">stringValue</span><span class="p">);</span>

        <span class="c1">//get our current path, see if it has changed
</span>        <span class="n">EditorGUI</span><span class="p">.</span><span class="nf">BeginChangeCheck</span><span class="p">();</span>
        <span class="kt">var</span> <span class="n">newScene</span> <span class="p">=</span> <span class="n">EditorGUI</span><span class="p">.</span><span class="nf">ObjectField</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">oldPath</span><span class="p">,</span> <span class="k">typeof</span><span class="p">(</span><span class="n">SceneAsset</span><span class="p">),</span> <span class="k">false</span><span class="p">)</span> <span class="k">as</span> <span class="n">SceneAsset</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">EditorGUI</span><span class="p">.</span><span class="nf">EndChangeCheck</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">newPath</span> <span class="p">=</span> <span class="n">AssetDatabase</span><span class="p">.</span><span class="nf">GetAssetPath</span><span class="p">(</span><span class="n">newScene</span><span class="p">);</span>
            <span class="n">property</span><span class="p">.</span><span class="n">stringValue</span> <span class="p">=</span> <span class="n">newPath</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>The above class is a <a href="https://docs.unity3d.com/Manual/editor-PropertyDrawers.html">custom property drawer.</a> Nothing too out of the ordinary going on, though do pay attention to the use of <code class="highlighter-rouge">var</code> on lines 9, 13, and 17. This is useful because it allows the type to be inferred at runtime, so I don’t need to know it at compile time (similar to <code class="highlighter-rouge">auto</code> in C++).</p>

<p>Lastly, I had to create the GUI for the entire system, which uses an internal class to the Unity Editor, the <code class="highlighter-rouge">ReorderableList</code>:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="na">[CustomEditor(typeof(MenuManager))]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">MenuManagerEditor</span><span class="p">:</span> <span class="n">Editor</span>
<span class="p">{</span>  
  <span class="k">private</span> <span class="n">ReorderableList</span> <span class="n">list</span><span class="p">;</span>

  <span class="k">private</span> <span class="k">void</span> <span class="nf">OnEnable</span><span class="p">()</span>
  <span class="p">{</span>
	<span class="n">list</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ReorderableList</span><span class="p">(</span><span class="n">serializedObject</span><span class="p">,</span>
			           <span class="n">serializedObject</span><span class="p">.</span><span class="nf">FindProperty</span><span class="p">(</span><span class="s">"transitions"</span><span class="p">),</span>
			           <span class="k">false</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>


	<span class="n">list</span><span class="p">.</span><span class="n">drawElementCallback</span> <span class="p">=</span> <span class="p">(</span><span class="n">Rect</span> <span class="n">rect</span><span class="p">,</span> <span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isActive</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">isFocused</span><span class="p">)</span> <span class="p">=&gt;</span>
	<span class="p">{</span>
	    <span class="c1">//get the MenuOptions object referenced
</span>	    <span class="kt">var</span> <span class="n">element</span> <span class="p">=</span> <span class="n">list</span><span class="p">.</span><span class="n">serializedProperty</span><span class="p">.</span><span class="nf">GetArrayElementAtIndex</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>

	    <span class="c1">//somme breathing room!
</span>	    <span class="n">rect</span><span class="p">.</span><span class="n">y</span> <span class="p">+=</span> <span class="m">2</span><span class="p">;</span>

	    <span class="c1">//display the scene picker
</span>	    <span class="n">EditorGUI</span><span class="p">.</span><span class="nf">PropertyField</span><span class="p">(</span>
		<span class="k">new</span> <span class="nf">Rect</span><span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">rect</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">rect</span><span class="p">.</span><span class="n">width</span> <span class="p">/</span> <span class="m">3</span><span class="p">,</span> <span class="n">EditorGUIUtility</span><span class="p">.</span><span class="n">singleLineHeight</span><span class="p">),</span>
		<span class="n">element</span><span class="p">.</span><span class="nf">FindPropertyRelative</span><span class="p">(</span><span class="s">"scene"</span><span class="p">),</span>
                <span class="n">GUIContent</span><span class="p">.</span><span class="n">none</span><span class="p">);</span>

	    <span class="c1">//draw the rest of the elements here...
</span>	<span class="p">};</span>
    <span class="p">}</span>

  <span class="c1">//when the GUI is updated
</span>  <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnInspectorGUI</span><span class="p">()</span>
  <span class="p">{</span>
        <span class="c1">//update the object we are attached to
</span>	<span class="n">serializedObject</span><span class="p">.</span><span class="nf">Update</span><span class="p">();</span>

        <span class="c1">//draw the list
</span>	<span class="n">list</span><span class="p">.</span><span class="nf">DoLayoutList</span><span class="p">();</span>

        <span class="c1">//apple any modified properties
</span>	<span class="n">serializedObject</span><span class="p">.</span><span class="nf">ApplyModifiedProperties</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>


        
      </section>

      <section class="page__share">
  
    <h4 class="page__share-title">If you liked it, give it a share?</h4>
  

  <a href="https://twitter.com/intent/tweet?via=tyskwo&text=Graduation: T-14 weeks http://localhost:4000/2017/graduation-t-14-weeks/" class="btn btn--twitter" title="If you liked it, give it a share? Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2017/graduation-t-14-weeks/" class="btn btn--facebook" title="If you liked it, give it a share? Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.reddit.com/submit?url=http://localhost:4000/2017/graduation-t-14-weeks/&title=Graduation: T-14 weeks" class="btn btn--reddit" title="If you liked it, give it a share? Reddit"><i class="fa fa-fw fa-reddit" aria-hidden="true"></i><span> Reddit</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/2017/graduation-t-14-weeks/" class="btn btn--linkedin" title="If you liked it, give it a share? LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      <footer class="page__meta">
        
        


      </footer>
      
  <nav class="pagination">
    
      <a href="http://localhost:4000/2016/empire-influence-maps-are-slow/" class="pagination--pager" title="Empire: Influence Maps are Slow.
">Previous</a>
    
    
      <a href="http://localhost:4000/2017/sometimes-the-best-tutorial-is-no-tutorial/" class="pagination--pager" title="Sometimes the best tutorial is no tutorial.
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      
        <h4 class="page__related-title">Try these too:</h4>
      
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/2017/the-week-of-too-many-hours/" rel="permalink">The week of too many hours.
</a>
      
    </h2>
    
    
    
    <p class="archive__item-excerpt" itemprop="description">The work train has no brakes.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/2017/back-in-the-swing/" rel="permalink">Back in the swing of things.
</a>
      
    </h2>
    
    
    
    <p class="archive__item-excerpt" itemprop="description">Six more weeks of mayhem. I wouldn’t want anything else.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/2017/PAX-relax/" rel="permalink">PAX is over, time to relax a little.
</a>
      
    </h2>
    
    
    
    <p class="archive__item-excerpt" itemprop="description">Quite literally the eye of the storm – with PAX behind us and graduation before us.
</p>
  </article>
</div>

        
      </div>
    </div>
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Connect:</strong></li>
    
    
      <li><a href="https://twitter.com/tyskwo"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/tyskwo"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2017 Tyler Wood.</div>

      </footer>
    </div>

    <script src="http://localhost:4000/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92078969-1', 'auto');
  ga('send', 'pageview');
</script>







  </body>
</html>
