<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Shooter State Machine - Tyler Wood</title>




<meta name="description" content="1 player AI vs infinite.">




<meta property="og:locale" content="en">
<meta property="og:site_name" content="Tyler Wood">
<meta property="og:title" content="Shooter State Machine">


  <link rel="canonical" href="http://localhost:4000/work/90_shooter-state-machine/">
  <meta property="og:url" content="http://localhost:4000/work/90_shooter-state-machine/">



  <meta property="og:description" content="1 player AI vs infinite.">



  <meta name="twitter:site" content="@tyskwo">
  <meta name="twitter:title" content="Shooter State Machine">
  <meta name="twitter:description" content="1 player AI vs infinite.">
  <meta name="twitter:url" content="http://localhost:4000/work/90_shooter-state-machine/">

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="http://localhost:4000/assets/images/portfolio/2015/shooter-state-machine/feature.png">
  

  





  <meta property="og:image" content="http://localhost:4000/assets/images/portfolio/2015/shooter-state-machine/feature.png">



  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-05-04T12:37:25-04:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Tyler Wood",
      "url" : "http://localhost:4000",
      "sameAs" : ["https://twitter.com/tyskwo","https://github.com/tyskwo","https://www.linkedin.com/in/tyskwo"]
    }
  </script>






<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Tyler Wood Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="144x144" href="/assets/images/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/assets/images/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/assets/images/favicons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/assets/images/favicons/manifest.json">
<link rel="mask-icon" href="/assets/images/favicons/safari-pinned-tab.svg" color="#707070">
<link rel="shortcut icon" href="/assets/images/favicons/favicon.ico">
<meta name="msapplication-config" content="/assets/images/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300i,400,400i,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Gentium+Book+Basic:400,400i" rel="stylesheet">

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://localhost:4000/"><p class="masthead__menu-item masthead__menu-item--lgl">TYLER</p>WOOD</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/blog">Blog</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/resume">Resume</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/work">All Work</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    
  







<div class="page__hero"
  style=" "
>
  
    <img src="http://localhost:4000/assets/images/portfolio/2015/shooter-state-machine/feature.png" alt="Shooter State Machine" class="page__hero-image">
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
        
        <h2 id="2015-as3">2015, AS3</h2>

      
    
      
      
        <h3>Description</h3>
        <p>An exercise in creating state machines: one for the player to survive as long as possible, and one for the enemies to hunt the player down.</p>

      
    
      
      
        <h3>Outcomes</h3>
        <p>Flashpunk.</p>

<p>State machine AI pattern.</p>

      
    
    
  
  </div>



  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Shooter State Machine
</h1>
          <!--<p class="page__meta">2015, AS3</p>
          -->
        </header>
      

      <section class="page__content" itemprop="text">
        <p>This projectâ€™s goal was to create an AI that could take over for a real human player using a structured state machine. This was a partner project with Drew Matthews, and we created a simple twin-stick shooter to show-off our AI. We used <em>Flashpunk</em> for the underlying engine, which allows us for easy collision detection. Along with the player AI, we also have an enemy state machine, and easy switching between AI and human controls.</p>

<p><img src="http://localhost:4000/assets/images/portfolio/2015/shooter-state-machine/nogui.gif" alt="ai-intro" class="align-center" /></p>

<h3 id="the-state-machines">The State Machines</h3>

<p>Both player-types share the same state machine architecture:</p>

<figure class="highlight"><pre><code class="language-as3" data-lang="as3"><span class="kr">public</span> <span class="kr">class</span> <span class="nx">State</span>
<span class="p">{</span>
	<span class="kr">protected</span> <span class="kd">var</span> <span class="nx">mEntity</span><span class="o">:</span><span class="nx">Entity</span><span class="o">;</span>
	<span class="kr">protected</span> <span class="kd">var</span> <span class="nx">mStateType</span><span class="o">:</span><span class="nx">int</span><span class="o">;</span>

	<span class="kr">public</span> <span class="kd">function</span> <span class="nx">State</span><span class="p">(</span><span class="nx">ent</span><span class="o">:</span><span class="nx">Entity</span><span class="p">)</span>
	<span class="p">{</span> <span class="nx">mEntity</span> <span class="o">=</span> <span class="nx">ent</span><span class="o">;</span> <span class="p">}</span>

	<span class="kr">public</span> <span class="kd">function</span> <span class="nx">update</span><span class="p">()</span><span class="o">:</span><span class="nb">void</span> <span class="p">{}</span>

	<span class="c1">//Used for setting data when entering state</span>
	<span class="kr">public</span> <span class="kd">function</span> <span class="nx">onLoadState</span><span class="p">(</span><span class="nx">prevState</span><span class="o">:</span><span class="nx">State</span><span class="p">)</span><span class="o">:</span><span class="nb">void</span> <span class="p">{}</span>

	<span class="c1">//Used for data when leaving state</span>
	<span class="kr">public</span> <span class="kd">function</span> <span class="nx">offLoadState</span><span class="p">(</span><span class="nx">nextState</span><span class="o">:</span><span class="nx">State</span><span class="p">)</span><span class="o">:</span><span class="nb">void</span> <span class="p">{}</span>

	<span class="c1">//Returns a state when a condition is met</span>
            <span class="c1">//subclasses implement this</span>
	<span class="kr">public</span> <span class="kd">function</span> <span class="nx">callback</span><span class="p">()</span><span class="o">:</span><span class="nx">State</span>
	<span class="p">{</span> <span class="k">return</span> <span class="kc">null</span><span class="o">;</span> <span class="p">}</span>

	<span class="c1">//Returns the int state type</span>
	<span class="kr">public</span> <span class="kd">function</span> <span class="nx">getStateType</span><span class="p">()</span><span class="o">:</span><span class="nx">int</span>
	<span class="p">{</span> <span class="k">return</span> <span class="nx">mStateType</span><span class="o">;</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Each player-type then has different states such as patrol, shoot, seek health, investigate, etc. We then form a state web, making segues between the different states, and what the conditions of the segue are (such as low health, enemy close by, etc.) Each state can offload data to the next state, thus its possible to alter behavior in multiple states and stay consistent (if power-ups were involved, for instance).</p>

<p><img src="http://localhost:4000/assets/images/portfolio/2015/shooter-state-machine/example.gif" alt="ai-intro" class="align-center" /></p>

<h3 id="retrospection-and-postmortem">Retrospection and Postmortem</h3>

<p>This project showed me the possible advantages of using finite state machines over decision or behavior trees. Here, each state, or behavior, is encapsulated and within its own class, allowing it to be independent of any other states and the ability to be hot-plugged based on other factors in the game (or for fast prototyping). On the other hand, behavior/decision trees tend to have their logic and behavior separated, which leads to the system reaching further in the codebase. This could be remedied slightly by having grouping behaviors into categories, but this still isnâ€™t ideal: it doesnâ€™t allow for individual behaviors to be independent of the system without a good bit of over-engineering. Still, there are advantages of behavior trees too, but thatâ€™s for another post. Overall, this project went well; I am proud of the result, and I feel it demonstrates a good understanding of how state machines work, and the code itself is clean and concise too.</p>

        
      </section>

      
      <footer class="page__meta">
        
        


      </footer>
      
  <nav class="pagination">
    
      <a href="http://localhost:4000/work/89_obstacle-avoidance/" class="pagination--pager" title="Obstacle Avoidance
">Previous</a>
    
    
      <a href="http://localhost:4000/work/91_flow-field-pathfinding/" class="pagination--pager" title="Flow Field Pathfinding
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Connect:</strong></li>
    
    
      <li><a href="https://twitter.com/tyskwo"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/tyskwo"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2017 Tyler Wood.</div>

      </footer>
    </div>

    <script src="http://localhost:4000/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92078969-1', 'auto');
  ga('send', 'pageview');
</script>







  </body>
</html>
